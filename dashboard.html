<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - Shree Shivay Skills</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial, sans-serif; background: #f4f7f6; color: #333; 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('background.jpg') no-repeat center center fixed;
            background-size: cover;
        }
        
        .dashboard-overlay { min-height: 100vh; padding: 20px; }

        /* --- DASHBOARD LAYOUT --- */
        .container { max-width: 1000px; margin: 0 auto; }
        
        .header-dash { 
            background: white; padding: 20px; border-radius: 15px; 
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2); margin-bottom: 30px;
        }
        .user-info h2 { color: #e65100; }
        .logout-btn { background: #ff4444; color: white; padding: 8px 15px; border-radius: 5px; text-decoration: none; font-weight: bold; }

        .main-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }

        /* --- COURSE CARD --- */
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .card h3 { border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 15px; color: #FF6B35; }

        .status-badge { 
            display: inline-block; padding: 5px 12px; border-radius: 20px; 
            font-size: 0.9rem; font-weight: bold; 
        }
        .active-status { background: #e8f5e9; color: #2e7d32; } /* Green */
        .pending-status { background: #fff3e0; color: #ef6c00; } /* Orange */

        .progress-bar { background: #eee; height: 10px; border-radius: 5px; margin: 15px 0; overflow: hidden; }
        .progress-fill { background: #FF6B35; height: 100%; width: 5%; } /* ‡§á‡§∏‡•á ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§°‡§æ‡§Ø‡§®‡§æ‡§Æ‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á */

        /* --- LOADING OVERLAY --- */
        #loader { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: white; display: flex; align-items: center; justify-content: center; z-index: 1000; 
        }

        @media (max-width: 768px) { .main-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <div id="loader"><h2>Verifying your details...</h2></div>

    <div class="dashboard-overlay">
        <div class="container">
            
            <div class="header-dash">
                <div class="user-info">
                    <h2 id="studentName">‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞, ‡§õ‡§æ‡§§‡•ç‡§∞!</h2>
                    <p id="studentEmailDisplay">Loading email...</p>
                </div>
                <a href="#" class="logout-btn" onclick="logout()">Logout</a>
            </div>

            <div class="main-grid">
                <div class="content-area">
                    <div class="card">
                        <h3>My Enrolled Course</h3>
                        <h1 id="courseTitle" style="font-size: 1.5rem; margin-bottom: 10px;">Loading course...</h1>
                        <p>Status: <span id="paymentStatus" class="status-badge pending-status">Pending Verification</span></p>
                        
                        <div class="progress-container" style="margin-top: 20px;">
                            <p>Course Progress: <b>5%</b></p>
                            <div class="progress-bar"><div class="progress-fill"></div></div>
                        </div>

                        <div style="margin-top: 20px; background: #f9f9f9; padding: 15px; border-radius: 10px; border-left: 5px solid #FF6B35;">
                            <h4>üìñ Study Material</h4>
                            <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">‡§ú‡•à‡§∏‡•á ‡§π‡•Ä ‡§Ü‡§™‡§ï‡§æ ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§µ‡•á‡§∞‡•Ä‡§´‡§æ‡§à ‡§π‡•ã‡§ó‡§æ, ‡§Ø‡§π‡§æ‡§Å ‡§Ü‡§™‡§ï‡§æ ‡§≤‡§∞‡•ç‡§®‡§ø‡§Ç‡§ó ‡§Æ‡§ü‡•á‡§∞‡§ø‡§Ø‡§≤ (Videos/PDF) ‡§¶‡§ø‡§ñ‡§®‡•á ‡§≤‡§ó‡•á‡§ó‡§æ‡•§</p>
                        </div>
                    </div>
                </div>

                <div class="sidebar">
                    <div class="card">
                        <h3>Notice Board</h3>
                        <ul style="list-style: none; font-size: 0.9rem;">
                            <li style="margin-bottom: 10px; border-bottom: 1px dashed #ddd; padding-bottom: 5px;">üìå ‡§®‡§à ‡§ï‡•ç‡§≤‡§æ‡§∏ ‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞ ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§ó‡•Ä‡•§</li>
                            <li style="margin-bottom: 10px; border-bottom: 1px dashed #ddd; padding-bottom: 5px;">üìÑ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§ú‡•á‡§ï‡•ç‡§∂‡§® ‡§Ü‡§à‡§°‡•Ä ‡§∏‡§π‡•Ä ‡§≠‡§∞‡•á‡§Ç‡•§</li>
                        </ul>
                    </div>
                    <div class="card" style="text-align: center;">
                        <p>Help Desk</p>
                        <a href="https://wa.me/919893663578" style="color: #25D366; font-weight: bold; text-decoration: none;">Chat on WhatsApp</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
    // ‡§Ü‡§™‡§ï‡§æ ‡§ó‡•Ç‡§ó‡§≤ ‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü URL (Data Fetch ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è)
    const scriptURL = 'https://script.google.com/macros/s/AKfycbyfXUnXEW9-GtLQNf5FIEpdRIieusqIb5B1kR-FhQnNaNNj28M4dgKecrfREqLMYtRF/exec';

    window.onload = function() {
        const email = localStorage.getItem('studentEmail');
        const pass = localStorage.getItem('studentPass');

        if (!email || !pass) {
            window.location.href = "login.html";
            return;
        }

        // ‡§ó‡•Ç‡§ó‡§≤ ‡§∂‡•Ä‡§ü ‡§∏‡•á ‡§°‡•á‡§ü‡§æ ‡§ö‡•á‡§ï ‡§ï‡§∞‡§®‡§æ (Login Verification)
        fetch(scriptURL + "?action=login&email=" + email + "&pass=" + pass)
        .then(res => res.json())
        .then(data => {
            document.getElementById('loader').style.display = 'none';
            
            if(data.result === "success") {
                // ‡§°‡•á‡§ü‡§æ ‡§Æ‡§ø‡§≤ ‡§ó‡§Ø‡§æ, ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
                document.getElementById('studentName').innerText = "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞, " + data.name + "!";
                document.getElementById('studentEmailDisplay').innerText = data.email;
                document.getElementById('courseTitle').innerText = data.course;
                
                const statusBadge = document.getElementById('paymentStatus');
                statusBadge.innerText = data.status;
                if(data.status === "Active") {
                    statusBadge.className = "status-badge active-status";
                }
            } else {
                alert("‡§ó‡§≤‡§§ ‡§à‡§Æ‡•á‡§≤ ‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§");
                logout();
            }
        })
        .catch(err => {
            console.error(err);
            // ‡§Ø‡§¶‡§ø ‡§Ö‡§≠‡•Ä ‡§Ü‡§™‡§ï‡§æ Apps Script "Login Get" ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, 
            // ‡§§‡•ã ‡§ü‡•á‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡§Æ ‡§≤‡•ã‡§°‡§∞ ‡§π‡§ü‡§æ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç
            document.getElementById('loader').style.display = 'none';
            document.getElementById('studentEmailDisplay').innerText = email;
            document.getElementById('courseTitle').innerText = "System testing mode...";
        });
    };

    function logout() {
        localStorage.clear();
        window.location.href = "login.html";
    }
</script>
</body>
</html>